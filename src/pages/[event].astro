---
import BaseLayout from '../layouts/BaseLayout.astro';
import PageHero from '../components/PageHero.astro';
import { eventRouteSlugs, getEventBySlug, type EventItem } from '../data/events';

export const getStaticPaths = () =>
  eventRouteSlugs.map((slug) => ({
    params: { event: slug },
    props: { eventItem: getEventBySlug(slug) }
  }));

const { eventItem }: { eventItem: EventItem } = Astro.props;
---

<BaseLayout
  title={`${eventItem.title} | Calumet Park Memorial`}
  description={`${eventItem.title} event details, date, and registration information.`}
>
  <PageHero
    eyebrow="Event Details"
    title={eventItem.title}
    description={`${eventItem.year} · ${eventItem.dateDisplay} · ${eventItem.time}`}
    primaryCta={{ label: 'View All Events', href: '/events/' }}
    secondaryCta={{ label: 'Contact Our Team', href: '/contact/' }}
  />

  <section class="section-spacing bg-white">
    <div class="container-wide grid gap-8 lg:grid-cols-[1.1fr_0.9fr]">
      <article>
        <h2 class="section-title">About this event</h2>
        <p class="section-lead">{eventItem.summary}</p>
        <h3 class="mt-8 font-serif text-3xl text-slatewood-900">Instructions</h3>
        <ul class="mt-4 list-disc space-y-2 pl-5 text-sm text-slatewood-600">
          {eventItem.instructions.map((instruction) => (
            <li>{instruction}</li>
          ))}
        </ul>
      </article>

      <aside class="card">
        <p class="text-xs uppercase tracking-[0.2em] text-slatewood-500">Date + Time</p>
        <p class="mt-2 font-serif text-3xl text-slatewood-900">{eventItem.dateDisplay}</p>
        <p class="mt-2 text-sm text-slatewood-600">{eventItem.time}</p>

        <p class="mt-6 text-xs uppercase tracking-[0.2em] text-slatewood-500">Registration + Links</p>
        <div class="mt-3 flex flex-col gap-3">
          {eventItem.ctaLinks.map((link) => (
            <a
              class="button-outline"
              href={link.href}
              target={link.external ? '_blank' : undefined}
              rel={link.external ? 'noreferrer' : undefined}
            >
              {link.label}
            </a>
          ))}
        </div>
      </aside>
    </div>
  </section>
</BaseLayout>
